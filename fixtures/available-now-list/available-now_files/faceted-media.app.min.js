function arrowTab(e){switch(e.which){case 40:e.preventDefault(),$(e.target).hasClass("js-facetsContainer")?$(e.target).children('div[role="treeitem"]:first').find("a:first").focus():$(e.target).emulateTab();break;case 38:e.preventDefault(),$(e.target).emulateTab(-1);break;case 39:e.preventDefault(),$(e.target).is("[aria-expanded]")&&"false"==$(e.target).attr("aria-expanded")&&facetsView.expandSection($(e.target).closest("li"),e);break;case 37:e.preventDefault(),$(e.target).is("[aria-expanded]")&&"true"==$(e.target).attr("aria-expanded")&&facetsView.collapseSection($(e.target).closest("li"),e);break;case 32:e.preventDefault(),$(e.target).is("[aria-expanded]")&&"true"==$(e.target).attr("aria-expanded")?facetsView.collapseSection($(e.target).closest("li"),e):$(e.target).is("[aria-expanded]")&&"false"==$(e.target).attr("aria-expanded")&&facetsView.expandSection($(e.target).closest("li"),e)}e.stopPropagation()}function getParams(e){var t=[];for(i=0;i<e.length;++i)t.push("bucket="+e[i]);return t.join("&")}var scrolling=!1,facetsController=window.facetsController,facetsView={expandSection:function(e,t){t&&(t.stopImmediatePropagation(),t.preventDefault());var s=$(e).children(".js-show-toggle").data("filter");$(e).children(".js-show-toggle").removeClass("js-unexpanded").addClass("js-expanded").find("i").addClass("icon-down-arrow").removeClass("icon-forward-arrow"),$(e).attr("aria-expanded","true").find("a").attr("aria-expanded","true"),$('div[data-filter-content="'+s+'"]').show()},collapseSection:function(e,t){t&&(t.stopImmediatePropagation(),t.preventDefault());var s=$(e).children(".js-show-toggle").data("filter");$(e).children(".js-show-toggle").removeClass("js-expanded").addClass("js-unexpanded").find("i").addClass("icon-forward-arrow").removeClass("icon-down-arrow"),$(e).attr("aria-expanded","false").find("a").attr("aria-expanded","false"),$('div[data-filter-content="'+s+'"]').hide()},showMore:function(e,t){$(e).closest("ul").children("li:nth-of-type(6)").children("a").focus();var s=$(e).data("more");$('.js-show-more[data-more="'+s+'"]').show(),$(e).html(window.html("facets.less")),$(e).removeClass("js-revealMore"),$(e).addClass("js-revealLess"),$(e).blur(),$(e).attr("aria-label",window.html("facets.showFewerFiltersLabel")),t.stopPropagation(),t.preventDefault()},showLess:function(e,t){var s=$(e).data("more");$('.js-show-more[data-more="'+s+'"]').hide(),$(e).html(window.html("facets.more")),$(e).removeClass("js-revealLess"),$(e).addClass("js-revealMore"),$(e).attr("aria-label",window.html("facets.showFewerFiltersLabel")),t.stopPropagation(),t.preventDefault()},switchView:function(e){if(!$("."+e).hasClass("disabled")){var t=$(".media-container.loaded"),s="large-block-grid-4 medium-block-grid-4 small-block-grid-2 list-view-ul",a="icon-list"==e?"list-view-ul":"large-block-grid-4 medium-block-grid-4 small-block-grid-2",i="grid-view list-view",o="icon-list"==e?"list-view":"grid-view";async.series([function(e){t.hide(),e(null)},function(r){t.children("ul:first-child").removeClass(s).addClass(a),t.removeClass(i).addClass(o),"icon-list"==e?($("i.icon-list").removeClass("gray"),$("i.icon-grid").addClass("gray"),$(".star-rating.list-view").show(),facetsView.setViewCookie(e)):"icon-grid"==e&&($("i.icon-list").addClass("gray"),$("i.icon-grid").removeClass("gray"),$(".star-rating.list-view").hide(),facetsView.setViewCookie(e)),r(null)},function(e){t.show(),e(null)},function(e){e(null)}])}},setViewCookie:function(e){"icon-list"==e?Cookies.set("media-view-preference","list",{httpOnly:!1,expires:365}):"icon-grid"==e&&Cookies.set("media-view-preference","grid",{httpOnly:!1,expires:365})}};$(document).ready(function(){$("[data-facet]:not(.js-room-select)").on("click",function(){facetsController.select(this)}),$(".js-room-select").on("click",function(){facetsController.restoreRoomFilter($(this).data("facet-full-name"))}),$(".js-clear-all").on("click",function(){facetsController.removeAll()}),$(".js-filter-tag:not(.js-locked-filter)").on("click",function(){facetsController.remove(this)}),$(".js-expand-facet").on("click tap","ul > li:first, ul > a:first",function(e){$(this).children(".js-show-toggle").hasClass("js-unexpanded")?facetsView.expandSection(this,e):facetsView.collapseSection(this,e)}).on("keypress","ul > li:first, ul > a:first",function(e){13===e.which&&($(this).children(".js-show-toggle").hasClass("js-unexpanded")?facetsView.expandSection(this,e):facetsView.collapseSection(this,e))}),$("div[data-filter-content]").on("click",".js-revealMore",function(e){facetsView.showMore(this,e)}).on("keypress",".js-revealMore",function(e){13===e.which&&facetsView.showMore(this,e)}).on("click",".js-revealLess",function(e){facetsView.showLess(this,e)}).on("keypress",".js-revealLess",function(e){13===e.which&&facetsView.showLess(this,e)}),$(".js-showFacets").on("click",function(){"none"===$(".js-facetsContainer").css("display")?($(".js-facetsContainer").css("display","block"),$(".js-showFacets").addClass("is-expanded")):($(".js-facetsContainer").css("display","none"),$(".js-showFacets").removeClass("is-expanded"))}),$(".js-facetsContainer").on("keydown","*",function(e){arrowTab(e)}).on("keydown",function(e){arrowTab(e)}),$(".js-remove-room-filter").on("click",function(){facetsController.removeRoomFilter($(this))});var e=detectshun.browser();(e.mobile||e.tablet)&&$(".js-showFacets").addClass("no-mobile-hover"),e.android&&e.bowser.osversion<"4"&&($("div:empty").append("&nbsp;"),$(".js-searchSortByOptions").on("change",function(){$(this).parent().hide(),setTimeout(function(){$(this).parent().show()},0)}))}),$(".title-description").each(function(){($(this)[0].offsetHeight<$(this)[0].scrollHeight||$(this)[0].offsetWidth<$(this)[0].scrollWidth)&&$(this).addClass("overflow")}),$(document).ready(function(){function e(){facetsController.countFacets()>0&&$(".js-clear-all").show()}$(".js-searchSortByOptions").find("option").text(function(e,t){return this.selected?window.text("facets.sortedBy")+" "+t.toLowerCase():t.replace(window.text("facets.sortedBy")+" ","")}),e()});
//# sourceMappingURL=faceted-media.app.min.js.map
